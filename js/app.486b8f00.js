(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],v=0,p=[];v<r.length;v++)o=r[v],s[o]&&p.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/synth/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0501":function(t,e,n){t.exports=n.p+"img/square.5fa7f458.svg"},"0c34":function(t){t.exports={0:8.17,1:8.66,2:9.17,3:9.72,4:10.3,5:10.91,6:11.56,7:12.24,8:12.97,9:13.75,10:14.56,11:15.43,12:16.35,13:17.32,14:18.35,15:19.44,16:20.6,17:21.82,18:23.12,19:24.49,20:25.95,21:27.5,22:29.13,23:30.86,24:32.7,25:34.64,26:36.7,27:38.89,28:41.2,29:43.65,30:46.24,31:48.99,32:51.91,33:55,34:58.27,35:61.73,36:65.4,37:69.29,38:73.41,39:77.78,40:82.4,41:87.3,42:92.49,43:97.99,44:103.82,45:110,46:116.54,47:123.47,48:130.81,49:138.59,50:146.83,51:155.56,52:164.81,53:174.61,54:184.99,55:195.99,56:207.65,57:220,58:233.08,59:246.94,60:261.62,61:277.18,62:293.66,63:311.12,64:329.62,65:349.22,66:369.99,67:391.99,68:415.3,69:440,70:466.16,71:493.88,72:523.25,73:554.36,74:587.32,75:622.25,76:659.25,77:698.45,78:739.98,79:783.99,80:830.6,81:880,82:932.32,83:987.76,84:1046.5,85:1108.73,86:1174.65,87:1244.5,88:1318.51,89:1396.91,90:1479.97,91:1567.98,92:1661.21,93:1760,94:1864.65,95:1975.53,96:2093,97:2217.46,98:2349.31,99:2489.01,100:2637.02,101:2793.82,102:2959.95,103:3135.96,104:3322.43,105:3520,106:3729.31,107:3951.06,108:4186,109:4434.92,110:4698.63,111:4978.03,112:5274.04,113:5587.65,114:5919.91,115:6271.92,116:6644.87,117:7040,118:7458.62,119:7902.13,120:8372.01,121:8869.84,122:9397.27,123:9956.06,124:10548.08,125:11175.3,126:11839.82,127:12543.85}},"22f9":function(t,e,n){t.exports=n.p+"img/sawtooth.be37c0b6.svg"},"25d8":function(t,e,n){t.exports=n.p+"img/triangle.e4f0629c.svg"},2856:function(t,e,n){},"2a60":function(t,e,n){t.exports=n.p+"img/sine.83900a81.svg"},"42a0":function(t,e,n){"use strict";var a=n("c532"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("piano")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Piano"},[n("div",{staticClass:"clavierWrap"},[n("Douze",{attrs:{octave:t.octave-1,play:t.play,stop:t.stop}}),n("Douze",{attrs:{octave:t.octave,play:t.play,stop:t.stop}}),n("Douze",{attrs:{octave:t.octave+1,play:t.play,stop:t.stop}})],1),n("div",{staticClass:"options"},[n("div",{staticClass:"octave"},[n("div",{staticClass:"text"},[t._v("O : "+t._s(t.octave))]),n("div",{staticClass:"button",on:{click:function(e){t.octave++}}},[t._v("+")]),n("div",{staticClass:"button",on:{click:function(e){t.octave--}}},[t._v("-")])]),n("div",{staticClass:"addsynth"},[n("div",{staticClass:"text"},[t._v("ðŸŽ¹")]),n("div",{staticClass:"button",on:{click:function(e){t.addSynth()}}},[t._v("+")]),n("div",{staticClass:"button",on:{click:function(e){t.removeSynth(t.synth.length-1)}}},[t._v("-")])])]),n("div",{staticClass:"synthParamWrap"},t._l(t.synth,function(e,a){return n("SynthParam",{key:a,attrs:{synth:e,number:a+1,remove:t.removeSynth}})}))])},r=[],c=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"douze",on:{mousedown:t.clickin,mouseup:t.unclickin}},[n("div",{staticClass:"blanche",class:{playing:t.playing[60]},attrs:{"data-note":60},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"noire",class:{playing:t.playing[61]},attrs:{"data-note":61},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"blanche",class:{playing:t.playing[62]},attrs:{"data-note":62},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"noire",class:{playing:t.playing[63]},attrs:{"data-note":63},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"blanche",class:{playing:t.playing[64]},attrs:{"data-note":64},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"blanche",class:{playing:t.playing[65]},attrs:{"data-note":65},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"noire",class:{playing:t.playing[66]},attrs:{"data-note":66},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"blanche",class:{playing:t.playing[67]},attrs:{"data-note":67},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"noire",class:{playing:t.playing[68]},attrs:{"data-note":68},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"blanche",class:{playing:t.playing[69]},attrs:{"data-note":69},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"noire",class:{playing:t.playing[70]},attrs:{"data-note":70},on:{mouseover:t.overin,mouseleave:t.leavin}}),n("div",{staticClass:"blanche",class:{playing:t.playing[71]},attrs:{"data-note":71},on:{mouseover:t.overin,mouseleave:t.leavin}})])}),l=[],u=(n("c5f6"),{name:"Douze",data:function(){return{playing:{}}},props:{octave:{default:0,type:Number},play:{type:Function},stop:{type:Function}},methods:{overin:function(t){t.buttons&&this.clickin(t)},leavin:function(t){t.buttons&&this.unclickin(t)},clickin:function(t){var e=t.target.dataset.note;e&&(this.$set(this.playing,e,!0),e=Number(e)+12*this.octave,this.play(e))},unclickin:function(t){var e=t.target.dataset.note;e&&(this.$set(this.playing,e,!1),e=Number(e)+12*this.octave,this.stop(e))}}}),v=u,p=(n("fc73"),n("2877")),d=Object(p["a"])(v,c,l,!1,null,"0cb29462",null);d.options.__file="Douze.vue";var y=d.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"synthParam"},[a("div",{staticClass:"topbar"},[a("div",{staticClass:"delete",on:{click:function(e){t.remove(t.number-1)}}},[t._v("X")])]),a("div",{staticClass:"waveform"},[a("div",{class:{selected:"sine"===t.synth.type},on:{click:function(e){t.synth.type="sine"}}},[a("img",{attrs:{src:n("2a60"),alt:"sine wave"}})]),a("div",{class:{selected:"square"===t.synth.type},on:{click:function(e){t.synth.type="square"}}},[a("img",{attrs:{src:n("0501"),alt:"square wave"}})]),a("div",{class:{selected:"sawtooth"===t.synth.type},on:{click:function(e){t.synth.type="sawtooth"}}},[a("img",{attrs:{src:n("22f9"),alt:"sawtooth wave"}})]),a("div",{class:{selected:"triangle"===t.synth.type},on:{click:function(e){t.synth.type="triangle"}}},[a("img",{attrs:{src:n("25d8"),alt:"triangle wave"}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"attack"},[a("div",{staticClass:"lib"},[t._v("â¬ˆ")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.synth.attack,expression:"synth.attack"}],attrs:{type:"number",value:"0",step:"0.1",min:"0"},domProps:{value:t.synth.attack},on:{input:function(e){e.target.composing||t.$set(t.synth,"attack",e.target.value)}}})])]),a("div",{staticClass:"release"},[a("div",{staticClass:"lib"},[t._v("â¬Š")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.synth.release,expression:"synth.release"}],attrs:{type:"number",value:"0",step:"0.1",min:"0"},domProps:{value:t.synth.release},on:{input:function(e){e.target.composing||t.$set(t.synth,"release",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"detune"},[a("div",{staticClass:"lib"},[t._v("#")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.synth.detune,expression:"synth.detune"}],attrs:{type:"number",value:"0",step:"1",min:"-11",max:"11"},domProps:{value:t.synth.detune},on:{input:function(e){e.target.composing||t.$set(t.synth,"detune",e.target.value)}}})])]),a("div",{staticClass:"octave"},[a("div",{staticClass:"lib"},[t._v("O")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.synth.octave,expression:"synth.octave"}],attrs:{type:"number",value:"0",step:"1",min:"-3",max:"3"},domProps:{value:t.synth.octave},on:{input:function(e){e.target.composing||t.$set(t.synth,"octave",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"volume"},[a("div",{staticClass:"lib"},[t._v("ðŸ”Š")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.synth.volume,expression:"synth.volume"}],attrs:{type:"number",value:"0",step:"0.1",min:"0",max:"1"},domProps:{value:t.synth.volume},on:{input:function(e){e.target.composing||t.$set(t.synth,"volume",e.target.value)}}})])])])])},m=[],f={name:"SynthParam",props:["synth","number","remove"]},g=f,b=(n("42a0"),Object(p["a"])(g,h,m,!1,null,null,null));b.options.__file="SynthParam.vue";var _=b.exports,k=n("c665"),C=n("aa9a"),w=n("0c34"),x=null;"undefined"!==typeof AudioContext?x=new AudioContext:"undefined"!==typeof webkitAudioContext&&(x=new webkitAudioContext);var N=function(){function t(e){var n=e.type,a=void 0===n?"sine":n,s=e.release,i=void 0===s?0:s,o=e.attack,r=void 0===o?0:o,c=e.volume,l=void 0===c?1:c,u=e.detune,v=void 0===u?0:u,p=e.octave,d=void 0===p?0:p;Object(k["a"])(this,t),this.context=x,this.gainNode=this.context.createGain(),this.gainNode.connect(x.destination),this.type=a,this.attack=r,this.release=i,this.notes=w,this.detune=v,this.octave=d,this.volume=l,this.playing={}}return Object(C["a"])(t,[{key:"clear",value:function(){for(var t in this.playing)this.playing[t].oscillator.stop();this.playing={}}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:127;t=Number(t),this.playing[t]||this.createNote(t),this.playing[t].gainNode.gain.cancelScheduledValues(0);var n=this.attack||.01,a=this.context.currentTime+n,s=Math.round(e/12.8)/10||.1;this.playing[t].gainNode.gain.exponentialRampToValueAtTime(s,a)}},{key:"stop",value:function(t){if(t=Number(t),this.playing[t]){this.playing[t].gainNode.gain.cancelScheduledValues(0);var e=this.release||.01,n=this.context.currentTime+e;this.playing[t].gainNode.gain.exponentialRampToValueAtTime(1e-5,n)}}},{key:"createNote",value:function(t){var e=x.createOscillator(),n=x.createGain();e.type=this.type,e.frequency.value=this.notes[t],e.detune.value=100*this.detune+1200*this.octave,e.connect(n),n.connect(this.gainNode),n.gain.value=1e-4,e.start(0),this.playing[t]={oscillator:e,gainNode:n}}},{key:"attack",get:function(){return this._attack},set:function(t){this._attack=Number(t)}},{key:"release",get:function(){return this._release},set:function(t){this._release=Number(t)}},{key:"volume",get:function(){return this._volume},set:function(t){this._volume=Number(t)||.001,this.gainNode.gain.value=this._volume}},{key:"detune",get:function(){return this._detune},set:function(t){this._detune=Number(t),this.clear()}},{key:"octave",get:function(){return this._octave},set:function(t){this._octave=Number(t),this.clear()}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this.clear()}}]),t}(),P=(n("96cf"),n("3040"));function O(t){return S.apply(this,arguments)}function S(){return S=Object(P["a"])(regeneratorRuntime.mark(function t(e){var n,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(navigator.requestMIDIAccess){t.next=3;break}return console.log("Try with chrome"),t.abrupt("return");case 3:return t.prev=3,t.next=6,navigator.requestMIDIAccess();case 6:n=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t["catch"](3),console.error("oops",t.t0),t.abrupt("return");case 13:for(a=n.inputs.values(),s=a.next();!s.done;s=a.next())s.value.onmidimessage=e;case 15:case"end":return t.stop()}},t,this,[[3,9]])})),S.apply(this,arguments)}var K=O;function j(t,e){var n={KeyA:"60",KeyW:"61",KeyS:"62",KeyE:"63",KeyD:"64",KeyF:"65",KeyT:"66",KeyG:"67",KeyY:"68",KeyH:"69",KeyU:"70",KeyJ:"71",KeyK:"72",KeyO:"73",KeyL:"74",KeyP:"75",Semicolon:"76"};window.addEventListener("keydown",function(e){n[e.code]&&t(n[e.code])}),window.addEventListener("keyup",function(t){n[t.code]&&e(n[t.code])})}var E=j,T={name:"Piano",components:{Douze:y,SynthParam:_},data:function(){return{synth:[new N({})],octave:0,notebase:60}},computed:{note:function(){return this.notebase+12*this.octave}},created:function(){K(this.midiEvent),E(this.play,this.stop)},methods:{play:function(t,e){this.synth.forEach(function(n){return n.play(t,e)})},stop:function(t){this.synth.forEach(function(e){return e.stop(t)})},addSynth:function(){this.synth.push(new N({}))},removeSynth:function(t){this.synth[t].clear(),this.synth.splice(t,1)},midiEvent:function(t){var e=t.data[0],n=t.data[1],a=t.data[2];return 144===e?this.play(n,a):128===e?this.stop(n):void console.log(t.data)}}},$=T,A=(n("b25f"),Object(p["a"])($,o,r,!1,null,"20e76f0f",null));A.options.__file="Piano.vue";var D=A.exports,q={name:"app",components:{Piano:D}},z=q,M=(n("5c0b"),Object(p["a"])(z,s,i,!1,null,null,null));M.options.__file="App.vue";var I=M.exports;a["a"].config.productionTip=!1,new a["a"]({el:"#app",render:function(t){return t(I)}})},"5c0b":function(t,e,n){"use strict";var a=n("2856"),s=n.n(a);s.a},"7c1f":function(t,e,n){},b25f:function(t,e,n){"use strict";var a=n("7c1f"),s=n.n(a);s.a},c532:function(t,e,n){},d7d4:function(t,e,n){},fc73:function(t,e,n){"use strict";var a=n("d7d4"),s=n.n(a);s.a}});
//# sourceMappingURL=app.486b8f00.js.map